var odinjs;(()=>{"use strict";var t={394:(t,e)=>{function r(t,e){return void 0===t?e:t}Object.defineProperty(e,"__esModule",{value:!0}),e.simplexControl=void 0,e.simplexControl=function(t){void 0===t&&(t={});var e={deltaNonZero:r(t.deltaNonZero,.05),deltaZero:r(t.deltaZero,.001),errorOnFailure:r(t.errorOnFailure,!1),tolerance:r(t.tolerance,1e-5)};if(e.tolerance<=0)throw new Error("Invalid control parameter: 'tolerance' must be strictly positive");return e}},153:(t,e,r)=>{var n=r(169);Object.defineProperty(e,"Vs",{enumerable:!0,get:function(){return n.Simplex}})},169:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Simplex=e.fitSimplex=void 0;var n=r(394),i=r(3);function o(t,e,r){for(var n=e.length,i=new Array(n),o=1+t,s=-t,a=0;a<i.length;++a)i[a]=o*e[a]+s*r[a];return i}e.fitSimplex=function(t,e,r,n){return void 0===r&&(r={}),void 0===n&&(n=200),new s(t,e,r).run(n*e.length)};var s=function(){function t(t,e,r){void 0===r&&(r={}),this.rho=1,this.chi=2,this.psi=-.5,this.sigma=.5,this._iterations=0,this._id=0,this._converged=!1,this._target=t,this._control=n.simplexControl(r),this._n=e.length,this._simplex=[],this._simplex.push(this._point(e.slice())),r.errorOnFailure||(this._target=function(t){return function(e){try{return t(e)}catch(t){return 1/0}}}(t));for(var i=0;i<this._n;++i){var o=e.slice();o[i]?o[i]*=1+this._control.deltaNonZero:o[i]=this._control.deltaZero,this._simplex.push(this._point(o))}this._sort()}return t.prototype.step=function(){if(this._iterations++,this._isConverged())return this._converged=!0,!0;var t=this._n,e=this._simplex[0],r=this._simplex[t],n=this._centroid(),i=this._reflect(r,n);if(i.value<e.value){var o=this._expand(r,n);this._update(o.value<i.value?o:i)}else if(i.value>=this._simplex[t-1].value){var s=i.value>r.value?this._contractInside(r,n):this._contractOutside(r,n);if(s.value<r.value)this._update(s);else{for(var a=1;a<=t;++a)this._simplex[a]=this._shrink(this._simplex[a],e.location);this._sort()}}else this._update(i);return!1},t.prototype.run=function(t){if(!this._converged)for(var e=0;e<t&&!this.step();++e);return this.result()},t.prototype.result=function(){var t=this._simplex[0];return{converged:this._converged,data:t.data,evaluations:this._id,iterations:this._iterations,location:t.location,value:t.value}},t.prototype.simplex=function(){return this._simplex.map((function(t){return{location:t.location,value:t.value}}))},t.prototype._point=function(t){var e=i.checkResult(this._target(t));return{data:e.data,id:this._id++,location:t,value:e.value}},t.prototype._sort=function(){this._simplex.sort((function(t,e){return t.value-e.value}))},t.prototype._centroid=function(){for(var t=this._n,e=new Array(t),r=0;r<t;++r){e[r]=0;for(var n=0;n<t;++n)e[r]+=this._simplex[n].location[r];e[r]/=t}return e},t.prototype._update=function(t){this._simplex[this._n]=t,this._sort()},t.prototype._reflect=function(t,e){return this._point(o(this.rho,e,t.location))},t.prototype._expand=function(t,e){return this._point(o(this.chi,e,t.location))},t.prototype._contractInside=function(t,e){return this._point(o(this.psi,e,t.location))},t.prototype._contractOutside=function(t,e){return this._point(o(-this.psi*this.rho,e,t.location))},t.prototype._shrink=function(t,e){return this._point(o(-this.sigma,e,t.location))},t.prototype._isConverged=function(){for(var t=this._control.tolerance,e=this._simplex[0],r=this._simplex[this._n],n=r.value-e.value<t||1-e.value/r.value<t,i=0,o=0;o<this._n;++o)i=Math.max(i,Math.abs(e.location[o]-r.location[o]));return i<t&&n},t}();e.Simplex=s},3:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.checkResult=void 0,e.checkResult=function(t){return"number"==typeof t?{data:null,value:t}:t}},886:(t,e)=>{function r(t,e){return new Error("Invalid control parameter: '".concat(t,"' ").concat(e))}function n(t,e){return void 0===t?e:t}Object.defineProperty(e,"__esModule",{value:!0}),e.dopriControl=void 0,e.dopriControl=function(t){void 0===t&&(t={});var e=1e-6,i=1e4,o=1e-6,s=1/0,a=1e-8,u=!1,h=0,l=1/0,f={atol:n(t.atol,e),maxSteps:n(t.maxSteps,i),rtol:n(t.rtol,o),stepSizeMax:n(t.stepSizeMax,s),stepSizeMin:n(t.stepSizeMin,a),stepSizeMinAllow:n(t.stepSizeMinAllow,u),stiffCheck:n(t.stiffCheck,h),tcrit:n(t.tcrit,l)};if(f.maxSteps<1)throw r("maxSteps","must be at least 1");if(f.atol<=0)throw r("atol","must be strictly positive");if(f.rtol<=0)throw r("rtol","must be strictly positive");return f}},742:function(t,e,r){var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.DDE=e.integrateDDE=void 0;var o=r(223),s=r(660);e.integrateDDE=function(t,e,r,n,i,o){void 0===i&&(i={}),void 0===o&&(o=null);var s=new a(t,e.length,i,o);return s.initialise(r,e),s.run(n)};var a=function(t){function e(e,r,n,i){void 0===n&&(n={}),void 0===i&&(i=null);var o=this,s=function(t){return o._interpolate(t)},a=null===i?null:function(t,e){return i(t,e,s)};return(o=t.call(this,(function(t,r,n){return e(t,r,n,s)}),r,n,a)||this)._y0=new Array(r),o}return i(e,t),e.prototype.initialise=function(e,r){return this._y0=r,t.prototype.initialise.call(this,e,r),this},e.prototype._interpolate=function(t){var e=this._findHistory(t);return e<0?this._y0.slice(0):this._stepper.interpolate(t,this._history[e])},e.prototype._findHistory=function(t){return(0,s.search)(this._history,(function(e){return e.t>t}))},e}(o.Dopri);e.DDE=a},223:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Dopri=e.integrateDopri=void 0;var s=r(886),a=o(r(922)),u=r(216),h=o(r(660)),l=Math.pow(2,-52);function f(t,e){return new Error("Integration failure: ".concat(t," at ").concat(e))}e.integrateDopri=function(t,e,r,n,i,o){void 0===i&&(i={}),void 0===o&&(o=null);var s=new c(t,e.length,i,o);return s.initialise(r,e),s.run(n)};var c=function(){function t(t,e,r,n){void 0===r&&(r={}),void 0===n&&(n=null),this._history=[],this._t=0,this._h=0,this._nSteps=0,this._nStepsAccepted=0,this._nStepsRejected=0,this._stiffNStiff=0,this._stiffNNonstiff=0,this._lastError=0,this._stepper=new a.Dopri5(t,e),this._control=(0,s.dopriControl)(r),this._output=n}return t.prototype.initialise=function(t,e){var r=this._stepper.n;if(e.length!==r)throw Error("Invalid size 'y' - expected a length ".concat(r," array"));return this._stepper.reset(t,e),this._reset(),this._h=function(t,e,r,n,i,o){var s=new Array(t.n),a=new Array(t.n),u=new Array(t.n);t.rhs(e,r,s),t.nEval++;var l=0,f=0,c=0;for(c=0;c<t.n;++c){var p=n+i*Math.abs(r[c]);l+=h.square(s[c]/p),f+=h.square(r[c]/p)}var d=l<=1e-10||f<=1e-10?1e-6:.01*Math.sqrt(f/l);for(d=Math.min(d,o),c=0;c<t.n;++c)u[c]=r[c]+d*s[c];t.rhs(e+d,u,a),t.nEval++;var v=0;for(c=0;c<t.n;++c)p=n+i*Math.abs(r[c]),v+=h.square((a[c]-s[c])/p);v=Math.sqrt(v)/d;var _=Math.max(Math.abs(v),Math.sqrt(l)),y=_<=1e-15?Math.max(1e-6,.001*Math.abs(d)):Math.pow(.01/_,1/t.order);return Math.min(Math.min(100*Math.abs(d),y),o)}(this._stepper,t,e,this._control.atol,this._control.rtol,this._control.stepSizeMax),this._t=t,this._history=[],this},t.prototype.run=function(t){for(;this._t<t;)this._step(),this._history.push(this._stepper.history.clone());return(0,u.interpolator)(this._history.slice(0),this._stepper,this._output)},t.prototype.statistics=function(){return{lastError:this._lastError,nEval:this._stepper.nEval,nSteps:this._nSteps,nStepsAccepted:this._nStepsAccepted,nStepsRejected:this._nStepsRejected,stiffNNonstiff:this._stiffNNonstiff,stiffNStiff:this._stiffNStiff}},t.prototype._reset=function(){this._nSteps=0,this._nStepsAccepted=0,this._nStepsRejected=0,this._stiffNStiff=0,this._stiffNNonstiff=0,this._lastError=0},t.prototype._step=function(){for(var t=this._t,e=this._h,r=!1,n=!1,i=Math.max(this._lastError,1e-4),o=this._stepper.stepControl,s=this._control;!r;){if(this._nSteps>s.maxSteps)throw f("too many steps",t);if(e<s.stepSizeMin){if(!s.stepSizeMinAllow)throw f("step too small",t);e=s.stepSizeMin}if(e<=Math.abs(t)*l)throw f("step size vanished",t);t+e>s.tcrit&&(e=s.tcrit-t),this._stepper.step(t,e),this._nSteps++;var a=this._stepper.error(s.atol,s.rtol),u=Math.pow(a,o.constant),c=1/o.factorMin,p=1/o.factorMax;if(a<=1){if(r=!0,this._nStepsAccepted++,this._isStiff(e))throw f("problem became stiff",t);this._stepper.stepComplete(t,e);var d=u/Math.pow(i,o.beta),v=e/(d=h.constrain(d/o.factorSafe,p,c));this._t+=e,this._h=n?Math.min(v,e):Math.min(v,s.stepSizeMax),this._lastError=a}else n=!0,this._nStepsAccepted>=1&&this._nStepsRejected++,e/=Math.min(c,u/o.factorSafe)}return this._t},t.prototype._isStiff=function(t){if(this._stiffNStiff>0||this._nStepsAccepted%this._control.stiffCheck==0)if(this._stepper.isStiff(t)){if(this._stiffNNonstiff=0,this._stiffNStiff++>=15)return!0}else this._stiffNStiff>0&&this._stiffNNonstiff++>=6&&(this._stiffNStiff=0,this._stiffNNonstiff=0);return!1},t}();e.Dopri=c},134:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dopri5StepControl=void 0;e.Dopri5StepControl=function(){this.factorSafe=.9,this.factorMin=.2,this.factorMax=10,this.beta=.04,this.constant=.2-.75*this.beta}},922:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Dopri5=void 0;var s=o(r(660)),a=o(r(134)),u=r(430),h=function(){function t(t,e){this.order=5,this.stepControl=new a.Dopri5StepControl,this.nEval=0,this.rhs=t,this.n=e,this.y=new Array(e),this.yNext=new Array(e),this.yStiff=new Array(e),this.k1=new Array(e),this.k2=new Array(e),this.k3=new Array(e),this.k4=new Array(e),this.k5=new Array(e),this.k6=new Array(e),this.history=new u.HistoryElement(this.order*e)}return t.prototype.step=function(t,e){var r=this.n,n=this.y,i=this.yNext,o=this.k1,s=this.k2,a=this.k3,u=this.k4,h=this.k5,l=this.k6,f=this.history.data,c=0;for(c=0;c<r;++c)i[c]=n[c]+.2*e*o[c];for(this.rhs(t+.2*e,i,s),c=0;c<r;++c)i[c]=n[c]+e*(.075*o[c]+.225*s[c]);for(this.rhs(t+.3*e,i,a),c=0;c<r;++c)i[c]=n[c]+e*(.9777777777777777*o[c]+-3.7333333333333334*s[c]+3.5555555555555554*a[c]);for(this.rhs(t+.8*e,i,u),c=0;c<r;++c)i[c]=n[c]+e*(2.9525986892242035*o[c]+-11.595793324188385*s[c]+9.822892851699436*a[c]+-.2908093278463649*u[c]);for(this.rhs(t+.8888888888888888*e,i,h),c=0;c<r;++c)this.yStiff[c]=n[c]+e*(2.8462752525252526*o[c]+-10.757575757575758*s[c]+8.906422717743473*a[c]+.2784090909090909*u[c]+-.2735313036020583*h[c]);var p=t+e;for(this.rhs(p,this.yStiff,l),c=0;c<r;++c)i[c]=n[c]+e*(.09114583333333333*o[c]+.44923629829290207*a[c]+.6510416666666666*u[c]+-.322376179245283*h[c]+.13095238095238096*l[c]);this.rhs(p,i,s);var d=4*r;for(c=0;c<r;++c)f[d++]=e*(-1.1270175653862835*o[c]+2.675424484351598*a[c]+-5.685526961588504*u[c]+3.5219323679207912*h[c]+-1.7672812570757455*l[c]+2.382468931778144*s[c]);for(c=0;c<r;++c)u[c]=e*(.0012326388888888888*o[c]+-.0042527702905061394*a[c]+.03697916666666667*u[c]+-.05086379716981132*h[c]+.0419047619047619*l[c]+-.025*s[c]);this.nEval+=6},t.prototype.stepComplete=function(t,e){this.saveHistory(t,e),s.copyArray(this.k1,this.k2),s.copyArray(this.y,this.yNext)},t.prototype.error=function(t,e){var r=0,n=0;for(n=0;n<this.n;++n){var i=t+e*Math.max(Math.abs(this.y[n]),Math.abs(this.yNext[n]));r+=s.square(this.k4[n]/i)}return Math.sqrt(r/this.n)},t.prototype.interpolate=function(t,e){for(var r=e.data,n=(t-e.t)/e.h,i=1-n,o=this.n,s=new Array(o),a=0;a<o;++a)s[a]=r[a]+n*(r[o+a]+i*(r[2*o+a]+n*(r[3*o+a]+i*r[4*o+a])));return s},t.prototype.isStiff=function(t){for(var e=0,r=0,n=0;n<this.n;++n)e+=s.square(this.k2[n]-this.k6[n]),r+=s.square(this.yNext[n]-this.yStiff[n]);return r>0&&Math.abs(t)*Math.sqrt(e/r)>3.25},t.prototype.reset=function(t,e){for(var r=0;r<this.n;++r)this.y[r]=e[r];this.rhs(t,e,this.k1),this.nEval=1},t.prototype.saveHistory=function(t,e){for(var r=this.history,n=this.n,i=0;i<n;++i){var o=this.yNext[i]-this.y[i],s=e*this.k1[i]-o;r.data[i]=this.y[i],r.data[n+i]=o,r.data[2*n+i]=s,r.data[3*n+i]=-e*this.k2[i]+o-s}r.t=t,r.h=e},t}();e.Dopri5=h},606:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryElement=void 0;var r=function(){function t(t){this.t=0,this.h=0,this.data=new Array(t)}return t.prototype.clone=function(){var e=new t(this.data.length);return e.t=this.t,e.h=this.h,e.data=this.data.slice(0),e},t}();e.HistoryElement=r},245:(t,e,r)=>{e.BJ=e.sN=void 0;var n=r(223);Object.defineProperty(e,"sN",{enumerable:!0,get:function(){return n.Dopri}});var i=r(742);Object.defineProperty(e,"BJ",{enumerable:!0,get:function(){return i.DDE}});r(961)},961:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.integrate=void 0;var n=r(742),i=r(223);e.integrate=function(t,e,r,o,s,a){if(void 0===s&&(s={}),void 0===a&&(a=null),function(t){return 3===t.length}(t)){if(!function(t){return null===t||2===t.length}(a))throw new Error("Can't used delayed output with non-delayed rhs");return(0,i.integrateDopri)(t,e,r,o,s,a)}if(!function(t){return null===t||3===t.length}(a))throw new Error("Can't used non-delayed output with delayed rhs");return(0,n.integrateDDE)(t,e,r,o,s,a)}},216:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interpolator=void 0,e.interpolator=function(t,e,r){return function(n){return function(t,e,r,n){for(var i=[],o=e,s=0,a=0,u=t;a<u.length;a++){for(var h=u[a];o[s].t+o[s].h<h;)s++;var l=r.interpolate(h,o[s]);null!==n&&(l=l.concat(n(h,l))),i.push(l)}return i}(n,t,e,r)}}},430:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryElement=void 0;var n=r(606);Object.defineProperty(e,"HistoryElement",{enumerable:!0,get:function(){return n.HistoryElement}})},660:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.search=e.seqLen=e.approxEqualArray=e.approxEqual=e.zeros=e.copyArray=e.constrain=e.square=void 0;var r=Math.pow(2,-26);e.square=function(t){return t*t},e.constrain=function(t,e,r){return Math.max(Math.min(t,r),e)},e.copyArray=function(t,e){for(var r=t.length,n=0;n<r;n++)t[n]=e[n]},e.zeros=function(t){for(var e=Array(t),r=0;r<t;++r)e[r]=0;return e},e.approxEqual=function(t,e,n){void 0===n&&(n=r);var i=Math.abs(t-e),o=Math.abs(t);return o>n&&(i/=o),i<n},e.approxEqualArray=function(t,e,n){if(void 0===n&&(n=r),e.length!==t.length)throw Error("Incompatible arrays");for(var i=0,o=0,s=0,a=0;a<t.length;++a)t[a]!==e[a]&&(i+=Math.abs(t[a]),o+=Math.abs(t[a]-e[a]),s++);return 0===s||(o/=s,(i/=s)>n&&(o/=i),o<n)},e.seqLen=function(t,e,r){for(var n=[],i=0;i<r;++i){var o=i/(r-1);n.push((1-o)*t+o*e)}return n},e.search=function(t,e){var r=0,n=t.length-1;if(0===t.length||e(t[r]))return-1;if(!e(t[n]))return n;for(;n-r>1;){var i=Math.floor((r+n)/2);e(t[i])?n=i:r=i}return r}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{Batch:()=>M,PkgWrapper:()=>x,base:()=>h,batchParsDisplace:()=>S,batchParsRange:()=>E,batchRun:()=>w,versions:()=>A,wodinFit:()=>b,wodinFitBaseline:()=>g,wodinRun:()=>m});var t=r(153);function e(t){return.5===i(t,1)?2*Math.round(t/2):Math.round(t)}function i(t,e){let r=t%e;return r*e<0&&(r+=e),r}function o(t,e){return Array.isArray(t)?t={data:t,dim:[t.length]}:"number"==typeof t&&(t={data:[t],dim:[1]}),t}function s(t,e,r){if(e.dim.length!==t)throw 1===t?Error(`Expected a numeric vector for '${r}'`):2===t?Error(`Expected a numeric matrix for '${r}'`):Error(`Expected a numeric array of rank ${t} for '${r}'`)}function a(t,e,r,n,i){for(const o of t.data){if(null===o)throw Error(`'${i}' must not contain any NA values`);u(o,e,r,n,i)}}function u(t,e,r,n,i){if("number"!=typeof t)throw Error(`Expected a number for '${i}'`);if(t<e)throw Error(`Expected '${i}' to be at least ${e}`);if(t>r)throw Error(`Expected '${i}' to be at most ${r}`);if(n&&!Number.isInteger(t))throw Error(`Expected '${i}' to be integer-like`)}const h={delay:function(t,e,r,n){const i=t(e);for(let t=0;t<r.length;++t)n[t]=i[r[t]]},maths:{intdivr:function(t,e){return Math.floor(t/e)},modr:i,odinSum1:function(t,e,r){let n=0;for(let i=e;i<r;++i)n+=t[i];return n},odinSum2:function(t,e,r,n,i,o){let s=0;for(let a=n;a<i;++a){const n=a*o;for(let i=e;i<r;++i)s+=t[i+n]}return s},odinSum3:function(t,e,r,n,i,o,s,a,u){let h=0;for(let l=o;l<s;++l){const o=l*u;for(let s=n;s<i;++s){const n=s*a+o;for(let i=e;i<r;++i)h+=t[i+n]}}return h},round2:function(t,r){if(void 0===r||0===r)return e(t);{const n=Math.pow(10,r);return e(t*n)/n}}},user:{checkUser:function(t,e,r){if("ignore"===r)return;const n=[];for(const r of t.keys())e.includes(r)||n.push(r);if(n.length>0){const t="Unknown user parameters: "+n.join(", ");if("message"===r)console.log(t);else{if("warning"!==r)throw"stop"===r?Error(t):Error(t+" (and invalid value for unusedUserAction)");console.warn(t)}}},setUserArrayFixed:function(t,e,r,n,i,u,h){let l=t.get(e);if(void 0===l){if(void 0!==r[e])return;throw Error(`Expected a value for '${e}'`)}{const t=n.length-1;l=o(l),s(t,l,e),function(t,e,r){const n=t.length-1;for(let i=0;i<n;++i){const o=t[i+1];if(e.dim[i]!==o)throw 1===n?Error(`Expected length ${o} value for '${r}'`):Error(`Incorrect size of dimension ${i+1} of '${r}' (expected ${o})`)}}(n,l,e),a(l,i,u,h,e),r[e]=l.data.slice()}},setUserArrayVariable:function(t,e,r,n,i,u,h){let l=t.get(e);if(void 0===l){if(void 0!==r[e])return;throw Error("Expected a value for '"+e+"'")}{const t=n.length-1;l=o(l),s(t,l,e),a(l,i,u,h,e),n[0]=l.data.length;for(let e=0;e<t;++e)n[e+1]=l.dim[e];r[e]=l.data.slice()}},setUserScalar:function(t,e,r,n,i,o,s){const a=t.get(e);if(void 0===a){if(void 0!==r[e])return;if(null===n)throw Error(`Expected a value for '${e}'`);r[e]=n}else{if("number"!=typeof a)throw Error(`Expected a number for '${e}'`);u(a,i,o,s,e),r[e]=a}}}};var l=r(245);function f(t,e,r){const n=(e-t)/(r-1),i=[];for(let e=0;e<r-1;++e)i.push(t+e*n);return i.push(e),i}function c(t,e){const r=[];for(let n=0;n<t;++n)r.push(e(n));return r}function p(t,e,r,n,i){return function(t){return 4===t.rhs.length}(t)?function(t,e,r,n,i){let o=null;"function"==typeof t.output&&(o=(e,r,n)=>t.output(e,r,n)),null===e&&(e=t.initial(r)),t.getInternal().initial_t=r;const s=new l.BJ((function(e,r,n,i){t.rhs(e,r,n,i)}),e.length,i,o);return s.initialise(r,e),{solution:s.run(n),statistics:s.statistics()}}(t,e,r,n,i):function(t,e,r,n,i){let o=null;"function"==typeof t.output&&(o=(e,r)=>t.output(e,r)),null===e&&(e=t.initial(r));const s=new l.sN((function(e,r,n){t.rhs(e,r,n)}),e.length,i,o);return s.initialise(r,e),{solution:s.run(n),statistics:s.statistics()}}(t,e,r,n,i)}function d(t,e,r,n){return(i,o,s)=>{const a=f(Math.max(r,i),Math.min(n,o),s),u=t(a);return u[0].map(((t,r)=>({name:e[r],x:a,y:u.map((t=>t[r]))})))}}function v(t,e,r,n,i){return(o,s,a)=>{const u=f(Math.max(n,o),Math.min(i,s),a),h=t(u).map((t=>t[r]));return{name:e,x:u,y:h}}}function _(t,e,r,n,i){const o=e.time[0],s=e.time[e.time.length-1];return a=>{const u=function(t,e){const r=new Map(t.base);for(let n=0;n<t.vary.length;++n)r.set(t.vary[n],e[n]);return r}(r,a),l=new t(h,u,"error"),f=p(l,null,o,s,i).solution,c=l.names(),_=c.indexOf(n),m=f(e.time).map((t=>t[_]));return{data:{names:c,pars:u,solutionAll:d(f,c,o,s),solutionFit:v(f,n,_,o,s)},value:y(e.value,m)}}}function y(t,e){let r=0;for(let n=0;n<t.length;++n){const i=t[n];isNaN(i)||(r+=Math.pow(i-e[n],2))}return r}function m(t,e,r,n,i){const o=new t(h,e,"error");return d(p(o,null,r,n,i).solution,o.names(),r,n)}function b(e,r,n,i,o,s){const a=_(e,r,n,i,o),u=n.vary.map((t=>n.base.get(t)));return new t.Vs(a,u,s)}function g(t,e,r,n,i){return _(t,e,{base:r,vary:[]},n,i)([])}class x{constructor(t,e,r){this.model=new t(h,e,r)}initial(t){return this.model.initial(t)}rhs(t,e){const r=new Array(e.length).fill(0);let n=null;if(3!==this.model.rhs.length)throw Error("Can't use rhs() with delay models");return this.model,this.model.rhs(t,e,r),this.model.output&&(n=this.model.output(t,e)),{output:n,state:r}}getMetadata(){return this.model.getMetadata()}getInternal(){return this.model.getInternal()}setUser(t,e){this.model.setUser(t,e)}run(t,e,r){const n=t[0],i=t[t.length-1],o=p(this.model,e,n,i,r);return{names:this.model.names(),statistics:o.statistics,y:o.solution(t)}}}class M{constructor(t,e,r,n,i){this.pars=e,this.tStart=r,this.tEnd=n,this.solutions=e.values.map((o=>{const s=function(t,e,r){const n=new Map(t);return n.set(e,r),n}(e.base,e.name,o);return m(t,s,r,n,i)}))}valueAtTime(t){const e=this.solutions.map((e=>e(t,t,1)));return e[0].map(((t,r)=>({name:e[0][r].name,x:this.pars.values,y:e.map((t=>t[r].y[0]))})))}extreme(t){return this.findExtremes()[t]}findExtremes(){if(void 0===this._extremes){const t=501,e=this.solutions.map((e=>e(this.tStart,this.tEnd,t))),r=e[0].map((t=>t.name)),n=c(r.length,(t=>e.map((e=>function(t){const e=function(t){let e=-1,r=1/0;for(let n=0;n<t.length;++n)t[n]<r&&(e=n,r=t[n]);return e}(t.y),r=function(t){let e=-1,r=-1/0;for(let n=0;n<t.length;++n)t[n]>r&&(e=n,r=t[n]);return e}(t.y),n=t.x[e],i=t.x[r],o=t.y[e];return{tMax:i,tMin:n,yMax:t.y[r],yMin:o}}(e[t])))));this._extremes={tMax:j("tMax",r,this.pars.values,n),tMin:j("tMin",r,this.pars.values,n),yMax:j("yMax",r,this.pars.values,n),yMin:j("yMin",r,this.pars.values,n)}}return this._extremes}}function w(t,e,r,n,i){return new M(t,e,r,n,i)}function E(t,e,r,n,i,o){const s=O(t,e);if(i>s)throw Error(`Expected lower bound to be no greater than ${s}`);if(o<s)throw Error(`Expected upper bound to be no less than ${s}`);if(i>=o)throw Error("Expected upper bound to be greater than lower bound");if(r<2)throw Error("Must include at least 2 traces in the batch");var a,u,h;return{base:t,name:e,values:n?(a=i,u=o,h=r,f(Math.log(a),Math.log(u),h).map(Math.exp)):f(i,o,r)}}function S(t,e,r,n,i){const o=O(t,e),s=i/100;return E(t,e,r,n,o*(1-s),o*(1+s))}function O(t,e){const r=t.get(e);if(void 0===r)throw Error(`Expected a value for '${e}'`);if("number"!=typeof r)throw Error(`Expected a number for '${e}'`);return r}function j(t,e,r,n){return c(e.length,(i=>({name:e[i],x:r,y:n[i].map((e=>e[t]))})))}function A(){return{dfoptim:"0.0.5",dopri:"0.0.12",odinjs:"0.0.7"}}})(),odinjs=n})();