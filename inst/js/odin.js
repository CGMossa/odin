var odinjs;(()=>{"use strict";var t={6:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interpolateSearch=e.InterpolatorBase=void 0;var r=function(){function t(t,e){(function(t){return Array.isArray(t[0])})(e)||(e=[e]),this._i=0,this._x=t,this._y=e,this.nX=this._x.length,this.nY=this._y.length;for(var r=0;r<this.nY;++r)if(this._y[r].length!==this.nX)throw Error("Invalid length for 'y', expected ".concat(this.nX))}return t.prototype.evalAll=function(t){for(var e=Array(this.nY),r=0;r<this.nY;++r)e[r]=this.eval(t,r);return e},t.prototype.search=function(t,e){var r=n(t,this._x,this._i);if(r<0||!e&&r===this.nX)throw Error("Interpolation failed as 'x' is out of range");return this._i=r,r},t}();function n(t,e,r){var n=r,o=r,i=1,s=e.length;if(e[n]<=t){if(n>=s-1)return s;for(o=n+i;e[o]<t;)if(n=o,(o+=i*=2)>=s){if(e[o=s-1]<t)return s;break}}else{if(0===n)return-1;for(n-=i;e[n]>t;){if(o=n,n<(i*=2)){if(e[n=0]>t)return-1;break}n-=i}}for(;o-n>1;){var a=Math.floor((o+n)/2);e[a]<t?n=a:o=a}return n}e.InterpolatorBase=r,e.interpolateSearch=n},731:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.InterpolatorConstant=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.eval=function(t,e){void 0===e&&(e=0);var r=Math.min(this.search(t,!0),this.nX-1);return r!==this.nX-1&&this._x[r+1]===t&&++r,this._y[e][r]},e}(r(6).InterpolatorBase);e.InterpolatorConstant=i},673:(t,e,r)=>{e.TT=e.at=e.vk=void 0;r(6);var n=r(731);Object.defineProperty(e,"vk",{enumerable:!0,get:function(){return n.InterpolatorConstant}});var o=r(477);Object.defineProperty(e,"at",{enumerable:!0,get:function(){return o.InterpolatorLinear}});var i=r(869);Object.defineProperty(e,"TT",{enumerable:!0,get:function(){return i.InterpolatorSpline}})},477:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.InterpolatorLinear=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.eval=function(t,e){void 0===e&&(e=0);var r=this.search(t,!1),n=this._x[r],o=(t-n)/(this._x[r+1]-n),i=this._y[e],s=i[r];return s+(i[r+1]-s)*o},e}(r(6).InterpolatorBase);e.InterpolatorLinear=i},869:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.solve=e.InterpolatorSpline=void 0;var s=i(r(863)),a=function(t){function e(e,r){var n=t.call(this,e,r)||this,o=function(t){var e=t.length,r=Array(e),n=Array(e),o=Array(e);r[0]=0,n[0]=2/(t[1]-t[0]),o[0]=1/(t[1]-t[0]);for(var i=1;i<e-1;++i){var s=t[i-1],a=t[i],u=t[i+1];r[i]=1/(a-s),n[i]=2*(1/(a-s)+1/(u-a)),o[i]=1/(u-a)}return r[e-1]=1/(t[e-1]-t[e-2]),n[e-1]=2/(t[e-1]-t[e-2]),o[e-1]=0,[r,n,o]}(n._x),i=function(t,e){for(var r=t.length,n=e.length,o=r-1,i=[],s=0;s<n;++s){var a=Array(r),u=e[s];a[0]=3*(u[1]-u[0])/Math.pow(t[1]-t[0],2);for(var l=1;l<o;++l){var h=t[l-1],f=t[l],c=t[l+1],p=u[l-1],d=u[l],v=u[l+1];a[l]=3*((d-p)/Math.pow(f-h,2)+(v-d)/Math.pow(c-f,2))}a[o]=3*(u[o]-u[o-1])/Math.pow(t[o]-t[o-1],2),i.push(a)}return i}(n._x,n._y);return n._k=function(t,e){for(var r=t[0],n=t[1],o=t[2],i=r.length,s=0,a=e;s<a.length;s++){var l=a[s];u(i,r,n.slice(),o,l)}return e}(o,i),n}return o(e,t),e.prototype.eval=function(t,e){void 0===e&&(e=0);var r=this.search(t,!1);return Array(this.nY),function(t,e,r,n,o){var i=(e-r[t])/(r[t+1]-r[t]),s=o[t]*(r[t+1]-r[t])-(n[t+1]-n[t]),a=-o[t+1]*(r[t+1]-r[t])+(n[t+1]-n[t]);return(1-i)*n[t]+i*n[t+1]+i*(1-i)*(s*(1-i)+a*i)}(r,t,this._x,this._y[e],this._k[e])},e}(r(6).InterpolatorBase);function u(t,e,r,n,o){if(!(0,s.default)(t,e,r,n,o))throw Error("solve failed: singular matrix?")}e.InterpolatorSpline=a,e.solve=u},394:(t,e)=>{function r(t,e){return void 0===t?e:t}Object.defineProperty(e,"__esModule",{value:!0}),e.simplexControl=void 0,e.simplexControl=function(t){void 0===t&&(t={});var e={deltaNonZero:r(t.deltaNonZero,.05),deltaZero:r(t.deltaZero,.001),errorOnFailure:r(t.errorOnFailure,!1),tolerance:r(t.tolerance,1e-5)};if(e.tolerance<=0)throw new Error("Invalid control parameter: 'tolerance' must be strictly positive");return e}},153:(t,e,r)=>{var n=r(169);Object.defineProperty(e,"Vs",{enumerable:!0,get:function(){return n.Simplex}})},169:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Simplex=e.fitSimplex=void 0;var n=r(394),o=r(3);function i(t,e,r){for(var n=e.length,o=new Array(n),i=1+t,s=-t,a=0;a<o.length;++a)o[a]=i*e[a]+s*r[a];return o}e.fitSimplex=function(t,e,r,n){return void 0===r&&(r={}),void 0===n&&(n=200),new s(t,e,r).run(n*e.length)};var s=function(){function t(t,e,r){void 0===r&&(r={}),this.rho=1,this.chi=2,this.psi=-.5,this.sigma=.5,this._iterations=0,this._id=0,this._converged=!1,this._target=t,this._control=n.simplexControl(r),this._n=e.length,this._simplex=[],this._simplex.push(this._point(e.slice())),r.errorOnFailure||(this._target=function(t){return function(e){try{return t(e)}catch(t){return 1/0}}}(t));for(var o=0;o<this._n;++o){var i=e.slice();i[o]?i[o]*=1+this._control.deltaNonZero:i[o]=this._control.deltaZero,this._simplex.push(this._point(i))}this._sort()}return t.prototype.step=function(){if(this._iterations++,this._isConverged())return this._converged=!0,!0;var t=this._n,e=this._simplex[0],r=this._simplex[t],n=this._centroid(),o=this._reflect(r,n);if(o.value<e.value){var i=this._expand(r,n);this._update(i.value<o.value?i:o)}else if(o.value>=this._simplex[t-1].value){var s=o.value>r.value?this._contractInside(r,n):this._contractOutside(r,n);if(s.value<r.value)this._update(s);else{for(var a=1;a<=t;++a)this._simplex[a]=this._shrink(this._simplex[a],e.location);this._sort()}}else this._update(o);return!1},t.prototype.run=function(t){if(!this._converged)for(var e=0;e<t&&!this.step();++e);return this.result()},t.prototype.result=function(){var t=this._simplex[0];return{converged:this._converged,data:t.data,evaluations:this._id,iterations:this._iterations,location:t.location,value:t.value}},t.prototype.simplex=function(){return this._simplex.map((function(t){return{location:t.location,value:t.value}}))},t.prototype._point=function(t){var e=o.checkResult(this._target(t));return{data:e.data,id:this._id++,location:t,value:e.value}},t.prototype._sort=function(){this._simplex.sort((function(t,e){return t.value-e.value}))},t.prototype._centroid=function(){for(var t=this._n,e=new Array(t),r=0;r<t;++r){e[r]=0;for(var n=0;n<t;++n)e[r]+=this._simplex[n].location[r];e[r]/=t}return e},t.prototype._update=function(t){this._simplex[this._n]=t,this._sort()},t.prototype._reflect=function(t,e){return this._point(i(this.rho,e,t.location))},t.prototype._expand=function(t,e){return this._point(i(this.chi,e,t.location))},t.prototype._contractInside=function(t,e){return this._point(i(this.psi,e,t.location))},t.prototype._contractOutside=function(t,e){return this._point(i(-this.psi*this.rho,e,t.location))},t.prototype._shrink=function(t,e){return this._point(i(-this.sigma,e,t.location))},t.prototype._isConverged=function(){for(var t=this._control.tolerance,e=this._simplex[0],r=this._simplex[this._n],n=r.value-e.value<t||1-e.value/r.value<t,o=0,i=0;i<this._n;++i)o=Math.max(o,Math.abs(e.location[i]-r.location[i]));return o<t&&n},t}();e.Simplex=s},3:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.checkResult=void 0,e.checkResult=function(t){return"number"==typeof t?{data:null,value:t}:t}},886:(t,e)=>{function r(t,e){return new Error("Invalid control parameter: '".concat(t,"' ").concat(e))}function n(t,e){return void 0===t?e:t}Object.defineProperty(e,"__esModule",{value:!0}),e.dopriControl=void 0,e.dopriControl=function(t){void 0===t&&(t={});var e=1e-6,o=1e4,i=1e-6,s=1/0,a=1e-8,u=!1,l=0,h=1/0,f={atol:n(t.atol,e),maxSteps:n(t.maxSteps,o),rtol:n(t.rtol,i),stepSizeMax:n(t.stepSizeMax,s),stepSizeMin:n(t.stepSizeMin,a),stepSizeMinAllow:n(t.stepSizeMinAllow,u),stiffCheck:n(t.stiffCheck,l),tcrit:n(t.tcrit,h)};if(f.maxSteps<1)throw r("maxSteps","must be at least 1");if(f.atol<=0)throw r("atol","must be strictly positive");if(f.rtol<=0)throw r("rtol","must be strictly positive");return f}},742:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.DDE=e.integrateDDE=void 0;var i=r(223),s=r(660);e.integrateDDE=function(t,e,r,n,o,i){void 0===o&&(o={}),void 0===i&&(i=null);var s=new a(t,e.length,o,i);return s.initialise(r,e),s.run(n)};var a=function(t){function e(e,r,n,o){void 0===n&&(n={}),void 0===o&&(o=null);var i=this,s=function(t){return i._interpolate(t)},a=null===o?null:function(t,e){return o(t,e,s)};return(i=t.call(this,(function(t,r,n){return e(t,r,n,s)}),r,n,a)||this)._y0=new Array(r),i}return o(e,t),e.prototype.initialise=function(e,r){return this._y0=r,t.prototype.initialise.call(this,e,r),this},e.prototype._interpolate=function(t){var e=this._findHistory(t);return e<0?this._y0.slice(0):this._stepper.interpolate(t,this._history[e])},e.prototype._findHistory=function(t){return(0,s.search)(this._history,(function(e){return e.t>t}))},e}(i.Dopri);e.DDE=a},223:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Dopri=e.integrateDopri=void 0;var s=r(886),a=i(r(922)),u=r(216),l=i(r(660)),h=Math.pow(2,-52);function f(t,e){return new Error("Integration failure: ".concat(t," at ").concat(e))}e.integrateDopri=function(t,e,r,n,o,i){void 0===o&&(o={}),void 0===i&&(i=null);var s=new c(t,e.length,o,i);return s.initialise(r,e),s.run(n)};var c=function(){function t(t,e,r,n){void 0===r&&(r={}),void 0===n&&(n=null),this._history=[],this._t=0,this._h=0,this._nSteps=0,this._nStepsAccepted=0,this._nStepsRejected=0,this._stiffNStiff=0,this._stiffNNonstiff=0,this._lastError=0,this._stepper=new a.Dopri5(t,e),this._control=(0,s.dopriControl)(r),this._output=n}return t.prototype.initialise=function(t,e){var r=this._stepper.n;if(e.length!==r)throw Error("Invalid size 'y' - expected a length ".concat(r," array"));return this._stepper.reset(t,e),this._reset(),this._h=function(t,e,r,n,o,i){var s=new Array(t.n),a=new Array(t.n),u=new Array(t.n);t.rhs(e,r,s),t.nEval++;var h=0,f=0,c=0;for(c=0;c<t.n;++c){var p=n+o*Math.abs(r[c]);h+=l.square(s[c]/p),f+=l.square(r[c]/p)}var d=h<=1e-10||f<=1e-10?1e-6:.01*Math.sqrt(f/h);for(d=Math.min(d,i),c=0;c<t.n;++c)u[c]=r[c]+d*s[c];t.rhs(e+d,u,a),t.nEval++;var v=0;for(c=0;c<t.n;++c)p=n+o*Math.abs(r[c]),v+=l.square((a[c]-s[c])/p);v=Math.sqrt(v)/d;var _=Math.max(Math.abs(v),Math.sqrt(h)),y=_<=1e-15?Math.max(1e-6,.001*Math.abs(d)):Math.pow(.01/_,1/t.order);return Math.min(Math.min(100*Math.abs(d),y),i)}(this._stepper,t,e,this._control.atol,this._control.rtol,this._control.stepSizeMax),this._t=t,this._history=[],this},t.prototype.run=function(t){for(;this._t<t;)this._step(),this._history.push(this._stepper.history.clone());return(0,u.interpolator)(this._history.slice(0),this._stepper,this._output)},t.prototype.statistics=function(){return{lastError:this._lastError,nEval:this._stepper.nEval,nSteps:this._nSteps,nStepsAccepted:this._nStepsAccepted,nStepsRejected:this._nStepsRejected,stiffNNonstiff:this._stiffNNonstiff,stiffNStiff:this._stiffNStiff}},t.prototype._reset=function(){this._nSteps=0,this._nStepsAccepted=0,this._nStepsRejected=0,this._stiffNStiff=0,this._stiffNNonstiff=0,this._lastError=0},t.prototype._step=function(){for(var t=this._t,e=this._h,r=!1,n=!1,o=Math.max(this._lastError,1e-4),i=this._stepper.stepControl,s=this._control;!r;){if(this._nSteps>s.maxSteps)throw f("too many steps",t);if(e<s.stepSizeMin){if(!s.stepSizeMinAllow)throw f("step too small",t);e=s.stepSizeMin}if(e<=Math.abs(t)*h)throw f("step size vanished",t);t+e>s.tcrit&&(e=s.tcrit-t),this._stepper.step(t,e),this._nSteps++;var a=this._stepper.error(s.atol,s.rtol),u=Math.pow(a,i.constant),c=1/i.factorMin,p=1/i.factorMax;if(a<=1){if(r=!0,this._nStepsAccepted++,this._isStiff(e))throw f("problem became stiff",t);this._stepper.stepComplete(t,e);var d=u/Math.pow(o,i.beta),v=e/(d=l.constrain(d/i.factorSafe,p,c));this._t+=e,this._h=n?Math.min(v,e):Math.min(v,s.stepSizeMax),this._lastError=a}else n=!0,this._nStepsAccepted>=1&&this._nStepsRejected++,e/=Math.min(c,u/i.factorSafe)}return this._t},t.prototype._isStiff=function(t){if(this._stiffNStiff>0||this._nStepsAccepted%this._control.stiffCheck==0)if(this._stepper.isStiff(t)){if(this._stiffNNonstiff=0,this._stiffNStiff++>=15)return!0}else this._stiffNStiff>0&&this._stiffNNonstiff++>=6&&(this._stiffNStiff=0,this._stiffNNonstiff=0);return!1},t}();e.Dopri=c},134:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dopri5StepControl=void 0;e.Dopri5StepControl=function(){this.factorSafe=.9,this.factorMin=.2,this.factorMax=10,this.beta=.04,this.constant=.2-.75*this.beta}},922:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Dopri5=void 0;var s=i(r(660)),a=i(r(134)),u=r(430),l=function(){function t(t,e){this.order=5,this.stepControl=new a.Dopri5StepControl,this.nEval=0,this.rhs=t,this.n=e,this.y=new Array(e),this.yNext=new Array(e),this.yStiff=new Array(e),this.k1=new Array(e),this.k2=new Array(e),this.k3=new Array(e),this.k4=new Array(e),this.k5=new Array(e),this.k6=new Array(e),this.history=new u.HistoryElement(this.order*e)}return t.prototype.step=function(t,e){var r=this.n,n=this.y,o=this.yNext,i=this.k1,s=this.k2,a=this.k3,u=this.k4,l=this.k5,h=this.k6,f=this.history.data,c=0;for(c=0;c<r;++c)o[c]=n[c]+.2*e*i[c];for(this.rhs(t+.2*e,o,s),c=0;c<r;++c)o[c]=n[c]+e*(.075*i[c]+.225*s[c]);for(this.rhs(t+.3*e,o,a),c=0;c<r;++c)o[c]=n[c]+e*(.9777777777777777*i[c]+-3.7333333333333334*s[c]+3.5555555555555554*a[c]);for(this.rhs(t+.8*e,o,u),c=0;c<r;++c)o[c]=n[c]+e*(2.9525986892242035*i[c]+-11.595793324188385*s[c]+9.822892851699436*a[c]+-.2908093278463649*u[c]);for(this.rhs(t+.8888888888888888*e,o,l),c=0;c<r;++c)this.yStiff[c]=n[c]+e*(2.8462752525252526*i[c]+-10.757575757575758*s[c]+8.906422717743473*a[c]+.2784090909090909*u[c]+-.2735313036020583*l[c]);var p=t+e;for(this.rhs(p,this.yStiff,h),c=0;c<r;++c)o[c]=n[c]+e*(.09114583333333333*i[c]+.44923629829290207*a[c]+.6510416666666666*u[c]+-.322376179245283*l[c]+.13095238095238096*h[c]);this.rhs(p,o,s);var d=4*r;for(c=0;c<r;++c)f[d++]=e*(-1.1270175653862835*i[c]+2.675424484351598*a[c]+-5.685526961588504*u[c]+3.5219323679207912*l[c]+-1.7672812570757455*h[c]+2.382468931778144*s[c]);for(c=0;c<r;++c)u[c]=e*(.0012326388888888888*i[c]+-.0042527702905061394*a[c]+.03697916666666667*u[c]+-.05086379716981132*l[c]+.0419047619047619*h[c]+-.025*s[c]);this.nEval+=6},t.prototype.stepComplete=function(t,e){this.saveHistory(t,e),s.copyArray(this.k1,this.k2),s.copyArray(this.y,this.yNext)},t.prototype.error=function(t,e){var r=0,n=0;for(n=0;n<this.n;++n){var o=t+e*Math.max(Math.abs(this.y[n]),Math.abs(this.yNext[n]));r+=s.square(this.k4[n]/o)}return Math.sqrt(r/this.n)},t.prototype.interpolate=function(t,e){for(var r=e.data,n=(t-e.t)/e.h,o=1-n,i=this.n,s=new Array(i),a=0;a<i;++a)s[a]=r[a]+n*(r[i+a]+o*(r[2*i+a]+n*(r[3*i+a]+o*r[4*i+a])));return s},t.prototype.isStiff=function(t){for(var e=0,r=0,n=0;n<this.n;++n)e+=s.square(this.k2[n]-this.k6[n]),r+=s.square(this.yNext[n]-this.yStiff[n]);return r>0&&Math.abs(t)*Math.sqrt(e/r)>3.25},t.prototype.reset=function(t,e){for(var r=0;r<this.n;++r)this.y[r]=e[r];this.rhs(t,e,this.k1),this.nEval=1},t.prototype.saveHistory=function(t,e){for(var r=this.history,n=this.n,o=0;o<n;++o){var i=this.yNext[o]-this.y[o],s=e*this.k1[o]-i;r.data[o]=this.y[o],r.data[n+o]=i,r.data[2*n+o]=s,r.data[3*n+o]=-e*this.k2[o]+i-s}r.t=t,r.h=e},t}();e.Dopri5=l},606:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryElement=void 0;var r=function(){function t(t){this.t=0,this.h=0,this.data=new Array(t)}return t.prototype.clone=function(){var e=new t(this.data.length);return e.t=this.t,e.h=this.h,e.data=this.data.slice(0),e},t}();e.HistoryElement=r},245:(t,e,r)=>{e.BJ=e.sN=void 0;var n=r(223);Object.defineProperty(e,"sN",{enumerable:!0,get:function(){return n.Dopri}});var o=r(742);Object.defineProperty(e,"BJ",{enumerable:!0,get:function(){return o.DDE}});r(961)},961:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.integrate=void 0;var n=r(742),o=r(223);e.integrate=function(t,e,r,i,s,a){if(void 0===s&&(s={}),void 0===a&&(a=null),function(t){return 3===t.length}(t)){if(!function(t){return null===t||2===t.length}(a))throw new Error("Can't used delayed output with non-delayed rhs");return(0,o.integrateDopri)(t,e,r,i,s,a)}if(!function(t){return null===t||3===t.length}(a))throw new Error("Can't used non-delayed output with delayed rhs");return(0,n.integrateDDE)(t,e,r,i,s,a)}},216:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interpolator=void 0,e.interpolator=function(t,e,r){return function(n){return function(t,e,r,n){for(var o=[],i=e,s=0,a=0,u=t;a<u.length;a++){for(var l=u[a];i[s].t+i[s].h<l;)s++;var h=r.interpolate(l,i[s]);null!==n&&(h=h.concat(n(l,h))),o.push(h)}return o}(n,t,e,r)}}},430:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryElement=void 0;var n=r(606);Object.defineProperty(e,"HistoryElement",{enumerable:!0,get:function(){return n.HistoryElement}})},660:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.search=e.seqLen=e.approxEqualArray=e.approxEqual=e.zeros=e.copyArray=e.constrain=e.square=void 0;var r=Math.pow(2,-26);e.square=function(t){return t*t},e.constrain=function(t,e,r){return Math.max(Math.min(t,r),e)},e.copyArray=function(t,e){for(var r=t.length,n=0;n<r;n++)t[n]=e[n]},e.zeros=function(t){for(var e=Array(t),r=0;r<t;++r)e[r]=0;return e},e.approxEqual=function(t,e,n){void 0===n&&(n=r);var o=Math.abs(t-e),i=Math.abs(t);return i>n&&(o/=i),o<n},e.approxEqualArray=function(t,e,n){if(void 0===n&&(n=r),e.length!==t.length)throw Error("Incompatible arrays");for(var o=0,i=0,s=0,a=0;a<t.length;++a)t[a]!==e[a]&&(o+=Math.abs(t[a]),i+=Math.abs(t[a]-e[a]),s++);return 0===s||(i/=s,(o/=s)>n&&(i/=o),i<n)},e.seqLen=function(t,e,r){for(var n=[],o=0;o<r;++o){var i=o/(r-1);n.push((1-i)*t+i*e)}return n},e.search=function(t,e){var r=0,n=t.length-1;if(0===t.length||e(t[r]))return-1;if(!e(t[n]))return n;for(;n-r>1;){var o=Math.floor((r+n)/2);e(t[o])?n=o:r=o}return r}},863:t=>{t.exports=function(t,e,r,n,o){var i,s;for(i=1;i<t;i++){if(0===r[i-1])return console.log("tridiagonalSolve: failed due to lack of diagonal dominance"),!1;s=e[i]/r[i-1],r[i]-=s*n[i-1],o[i]-=s*o[i-1]}if(0===r[t-1])return console.log("tridiagonalSolve: failed due to singular matrix"),!1;for(o[t-1]/=r[t-1],i=t-2;i>=0;i--){if(0===r[i])return console.log("tridiagonalSolve: failed due to singular matrix"),!1;o[i]=(o[i]-n[i]*o[i+1])/r[i]}return!0}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{Batch:()=>x,PkgWrapper:()=>w,base:()=>h,batchParsDisplace:()=>S,batchParsRange:()=>E,batchRun:()=>M,versions:()=>A,wodinFit:()=>g,wodinFitBaseline:()=>b,wodinRun:()=>m});var t=r(153),e=r(673);function o(t){return.5===i(t,1)?2*Math.round(t/2):Math.round(t)}function i(t,e){let r=t%e;return r*e<0&&(r+=e),r}function s(t,e){return Array.isArray(t)?t={data:t,dim:[t.length]}:"number"==typeof t&&(t={data:[t],dim:[1]}),t}function a(t,e,r){if(e.dim.length!==t)throw 1===t?Error(`Expected a numeric vector for '${r}'`):2===t?Error(`Expected a numeric matrix for '${r}'`):Error(`Expected a numeric array of rank ${t} for '${r}'`)}function u(t,e,r,n,o){for(const i of t.data){if(null===i)throw Error(`'${o}' must not contain any NA values`);l(i,e,r,n,o)}}function l(t,e,r,n,o){if("number"!=typeof t)throw Error(`Expected a number for '${o}'`);if(t<e)throw Error(`Expected '${o}' to be at least ${e}`);if(t>r)throw Error(`Expected '${o}' to be at most ${r}`);if(n&&!Number.isInteger(t))throw Error(`Expected '${o}' to be integer-like`)}const h={delay:function(t,e,r,n){const o=t(e);for(let t=0;t<r.length;++t)n[t]=o[r[t]]},interpolate:{alloc:function(t,r,n){const o=function(t,e){if(t.length===e)return[t];const r=[],n=t.length/e;for(let o=0;o<n;++o)r.push(t.slice(e*o,e*(o+1)));return r}(n,r.length);if("constant"===t)return new e.vk(r,o);if("linear"===t)return new e.at(r,o);if("spline"===t)return new e.TT(r,o);throw Error(`Invalid interpolation method '${t}'`)},checkY:function(t,e,r,n){if(1===e.length){if(t[0]!==e[0])throw Error(`Expected ${r} to have length ${t[0]} (for ${n})`)}else for(let o=0;o<e.length;++o)if(t[o]!==e[o])throw Error(`Expected dimension ${o+1} of ${r} to have size ${t[o]} (for ${n})`)},times:function(t,e){const r=Math.max(...t);return{max:Math.min(...e),min:r}}},maths:{intdivr:function(t,e){return Math.floor(t/e)},modr:i,odinSum1:function(t,e,r){let n=0;for(let o=e;o<r;++o)n+=t[o];return n},odinSum2:function(t,e,r,n,o,i){let s=0;for(let a=n;a<o;++a){const n=a*i;for(let o=e;o<r;++o)s+=t[o+n]}return s},odinSum3:function(t,e,r,n,o,i,s,a,u){let l=0;for(let h=i;h<s;++h){const i=h*u;for(let s=n;s<o;++s){const n=s*a+i;for(let o=e;o<r;++o)l+=t[o+n]}}return l},round2:function(t,e){if(void 0===e||0===e)return o(t);{const r=Math.pow(10,e);return o(t*r)/r}}},user:{checkUser:function(t,e,r){if("ignore"===r)return;const n=[];for(const r of Object.keys(t))e.includes(r)||n.push(r);if(n.length>0){const t="Unknown user parameters: "+n.join(", ");if("message"===r)console.log(t);else{if("warning"!==r)throw"stop"===r?Error(t):Error(t+" (and invalid value for unusedUserAction)");console.warn(t)}}},setUserArrayFixed:function(t,e,r,n,o,i,l){let h=t[e];if(void 0===h){if(void 0!==r[e])return;throw Error(`Expected a value for '${e}'`)}{const t=n.length-1;h=s(h),a(t,h,e),function(t,e,r){const n=t.length-1;for(let o=0;o<n;++o){const i=t[o+1];if(e.dim[o]!==i)throw 1===n?Error(`Expected length ${i} value for '${r}'`):Error(`Incorrect size of dimension ${o+1} of '${r}' (expected ${i})`)}}(n,h,e),u(h,o,i,l,e),r[e]=h.data.slice()}},setUserArrayVariable:function(t,e,r,n,o,i,l){let h=t[e];if(void 0===h){if(void 0!==r[e])return;throw Error("Expected a value for '"+e+"'")}{const t=n.length-1;h=s(h),a(t,h,e),u(h,o,i,l,e),n[0]=h.data.length;for(let e=0;e<t;++e)n[e+1]=h.dim[e];r[e]=h.data.slice()}},setUserScalar:function(t,e,r,n,o,i,s){const a=t[e];if(void 0===a){if(void 0!==r[e])return;if(null===n)throw Error(`Expected a value for '${e}'`);r[e]=n}else{if("number"!=typeof a)throw Error(`Expected a number for '${e}'`);l(a,o,i,s,e),r[e]=a}}}};var f=r(245);function c(t,e,r){const n=(e-t)/(r-1),o=[];for(let e=0;e<r-1;++e)o.push(t+e*n);return o.push(e),o}function p(t,e){const r=[];for(let n=0;n<t;++n)r.push(e(n));return r}function d(t,e,r,n,o){const i=t.getMetadata().interpolateTimes;return o.tcrit=function(t,e,r,n){if(void 0===r)return 1/0;if(t<r.min)throw Error(`Integration times do not span interpolation range; min: ${r.min}`);if(e>r.max)throw Error(`Integration times do not span interpolation range; max: ${r.max}`);return void 0===n&&(n=r.max),n}(r,n,i,o.tcrit),function(t){return 4===t.rhs.length}(t)?function(t,e,r,n,o){let i=null;"function"==typeof t.output&&(i=(e,r,n)=>t.output(e,r,n)),null===e&&(e=t.initial(r)),t.getInternal().initial_t=r;const s=new f.BJ((function(e,r,n,o){t.rhs(e,r,n,o)}),e.length,o,i);return s.initialise(r,e),{solution:s.run(n),statistics:s.statistics()}}(t,e,r,n,o):function(t,e,r,n,o){let i=null;"function"==typeof t.output&&(i=(e,r)=>t.output(e,r)),null===e&&(e=t.initial(r));const s=new f.sN((function(e,r,n){t.rhs(e,r,n)}),e.length,o,i);return s.initialise(r,e),{solution:s.run(n),statistics:s.statistics()}}(t,e,r,n,o)}function v(t,e,r,n){return(o,i,s)=>{const a=c(Math.max(r,o),Math.min(n,i),s),u=t(a),l=u[0].map(((t,e)=>u.map((t=>t[e]))));return{names:e,x:a,y:l}}}function _(t,e,r,n,o){const i=e.time[0],s=e.time[e.time.length-1];return a=>{const u=function(t,e){const r=Object.assign({},t.base);for(let n=0;n<t.vary.length;++n)r[t.vary[n]]=e[n];return r}(r,a),l=new t(h,u,"error"),f=d(l,null,i,s,o).solution,c=l.names(),p=c.indexOf(n),_=f(e.time).map((t=>t[p]));return{data:{endTime:s,names:c,pars:u,solution:v(f,c,i,s)},value:y(e.value,_)}}}function y(t,e){let r=0;for(let n=0;n<t.length;++n){const o=t[n];isNaN(o)||(r+=Math.pow(o-e[n],2))}return r}function m(t,e,r,n,o){const i=new t(h,e,"error");return v(d(i,null,r,n,o).solution,i.names(),r,n)}function g(e,r,n,o,i,s){const a=_(e,r,n,o,i),u=n.vary.map((t=>n.base[t]));return new t.Vs(a,u,s)}function b(t,e,r,n,o){return _(t,e,{base:r,vary:[]},n,o)([])}class w{constructor(t,e,r){this.model=new t(h,e,r)}initial(t){return this.model.initial(t)}rhs(t,e){const r=new Array(e.length).fill(0);let n=null;if(3!==this.model.rhs.length)throw Error("Can't use rhs() with delay models");return this.model,this.model.rhs(t,e,r),this.model.output&&(n=this.model.output(t,e)),{output:n,state:r}}getMetadata(){return this.model.getMetadata()}getInternal(){return this.model.getInternal()}setUser(t,e){this.model.setUser(t,e)}run(t,e,r){const n=t[0],o=t[t.length-1],i=d(this.model,e,n,o,r);return{names:this.model.names(),statistics:i.statistics,y:i.solution(t)}}}class x{constructor(t,e,r,n,o){this.pars=e,this.tStart=r,this.tEnd=n,this.solutions=e.values.map((i=>{const s=function(t,e,r){const n=Object.assign({},t);return n[e]=r,n}(e.base,e.name,i);return m(t,s,r,n,o)}))}valueAtTime(t){const e=this.solutions.map((e=>e(t,t,1)));return{names:e[0].names,x:this.pars.values,y:e[0].names.map(((t,r)=>e.map((t=>t.y[r][0]))))}}extreme(t){return this.findExtremes()[t]}findExtremes(){if(void 0===this._extremes){const t=501,e=this.solutions.map((e=>e(this.tStart,this.tEnd,t))),r=e[0].names,n=this.pars.values,o=p(r.length,(t=>e.map((e=>function(t,e){const r=e.x,n=e.y[t],o=function(t){let e=-1,r=1/0;for(let n=0;n<t.length;++n)t[n]<r&&(e=n,r=t[n]);return e}(n),i=function(t){let e=-1,r=-1/0;for(let n=0;n<t.length;++n)t[n]>r&&(e=n,r=t[n]);return e}(n),s=r[o],a=r[i],u=n[o];return{tMax:a,tMin:s,yMax:n[i],yMin:u}}(t,e)))));this._extremes={tMax:j("tMax",r,n,o),tMin:j("tMin",r,n,o),yMax:j("yMax",r,n,o),yMin:j("yMin",r,n,o)}}return this._extremes}}function M(t,e,r,n,o){return new x(t,e,r,n,o)}function E(t,e,r,n,o,i){const s=O(t,e);if(o>s)throw Error(`Expected lower bound to be no greater than ${s}`);if(i<s)throw Error(`Expected upper bound to be no less than ${s}`);if(o>=i)throw Error("Expected upper bound to be greater than lower bound");if(r<2)throw Error("Must include at least 2 traces in the batch");if(n&&o<=0)throw Error("Lower bound must be greater than 0 for logarithmic scale");var a,u,l;return{base:t,name:e,values:n?(a=o,u=i,l=r,c(Math.log(a),Math.log(u),l).map(Math.exp)):c(o,i,r)}}function S(t,e,r,n,o){const i=O(t,e),s=o/100;return E(t,e,r,n,i*(1-s),i*(1+s))}function O(t,e){const r=t[e];if(void 0===r)throw Error(`Expected a value for '${e}'`);if("number"!=typeof r)throw Error(`Expected a number for '${e}'`);return r}function j(t,e,r,n){return{names:e,x:r,y:p(e.length,(e=>n[e].map((e=>e[t]))))}}function A(){return{dfoptim:"0.0.5",dopri:"0.0.12",odinjs:"0.0.10"}}})(),odinjs=n})();