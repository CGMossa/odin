var odin;(()=>{"use strict";var t={886:(t,r)=>{function e(t,r){return new Error("Invalid control parameter: '"+t+"' "+r)}function i(t,r){return void 0===t?r:t}Object.defineProperty(r,"__esModule",{value:!0}),r.dopriControl=function(t){void 0===t&&(t={});var r=1e-6,n=1e4,o=1e-6,s=1/0,a=1e-8,h=!1,f=0,u=1/0,l={atol:i(t.atol,r),maxSteps:i(t.maxSteps,n),rtol:i(t.rtol,o),stepSizeMax:i(t.stepSizeMax,s),stepSizeMin:i(t.stepSizeMin,a),stepSizeMinAllow:i(t.stepSizeMinAllow,h),stiffCheck:i(t.stiffCheck,f),tcrit:i(t.tcrit,u)};if(l.maxSteps<1)throw e("maxSteps","must be at least 1");if(l.atol<=0)throw e("atol","must be strictly positive");if(l.rtol<=0)throw e("rtol","must be strictly positive");return l}},742:function(t,r,e){var i,n=this&&this.__extends||(i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])},i(t,r)},function(t,r){function e(){this.constructor=t}i(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)});Object.defineProperty(r,"__esModule",{value:!0});var o=e(223),s=e(660);r.integrate=function(t,r,e,i,n,o){void 0===n&&(n={}),void 0===o&&(o=null);var s=new a(t,r.length,n,o);return s.initialise(e,r),s.run(i)};var a=function(t){function r(r,e,i,n){void 0===i&&(i={}),void 0===n&&(n=null);var o=this,s=function(t){return o._interpolate(t)},a=null===n?null:function(t,r){return n(t,r,s)};return(o=t.call(this,(function(t,e,i){return r(t,e,i,s)}),e,i,a)||this)._y0=new Array(e),o}return n(r,t),r.prototype.initialise=function(r,e){return this._y0=e,t.prototype.initialise.call(this,r,e),this},r.prototype._interpolate=function(t){var r=this._findHistory(t);return r<0?this._y0.slice(0):this._stepper.interpolate(t,this._history[r])},r.prototype._findHistory=function(t){return s.search(this._history,(function(r){return r.t>t}))},r}(o.Dopri);r.DDE=a},223:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0});var i=e(886),n=e(922),o=e(216),s=e(660),a=Math.pow(2,-52);function h(t,r){return new Error("Integration failure: "+t+" at "+r)}r.integrate=function(t,r,e,i,n,o){void 0===n&&(n={}),void 0===o&&(o=null);var s=new f(t,r.length,n,o);return s.initialise(e,r),s.run(i)};var f=function(){function t(t,r,e,o){void 0===e&&(e={}),void 0===o&&(o=null),this._history=[],this._t=0,this._h=0,this._nSteps=0,this._nStepsAccepted=0,this._nStepsRejected=0,this._stiffNStiff=0,this._stiffNNonstiff=0,this._lastError=0,this._stepper=new n.Dopri5(t,r),this._control=i.dopriControl(e),this._output=o}return t.prototype.initialise=function(t,r){var e=this._stepper.n;if(r.length!==e)throw Error("Invalid size 'y' - expected a length "+e+" array");return this._stepper.reset(t,r),this._reset(),this._h=function(t,r,e,i,n,o){var a=new Array(t.n),h=new Array(t.n),f=new Array(t.n);t.rhs(r,e,a),t.nEval++;var u=0,l=0,c=0;for(c=0;c<t.n;++c){var p=i+n*Math.abs(e[c]);u+=s.square(a[c]/p),l+=s.square(e[c]/p)}var d=u<=1e-10||l<=1e-10?1e-6:.01*Math.sqrt(l/u);for(d=Math.min(d,o),c=0;c<t.n;++c)f[c]=e[c]+d*a[c];t.rhs(r+d,f,h),t.nEval++;var y=0;for(c=0;c<t.n;++c)p=i+n*Math.abs(e[c]),y+=s.square((h[c]-a[c])/p);y=Math.sqrt(y)/d;var v=Math.max(Math.abs(y),Math.sqrt(u)),_=v<=1e-15?Math.max(1e-6,.001*Math.abs(d)):Math.pow(.01/v,1/t.order);return Math.min(Math.min(100*Math.abs(d),_),o)}(this._stepper,t,r,this._control.atol,this._control.rtol,this._control.stepSizeMax),this._t=t,this._history=[],this},t.prototype.run=function(t){for(;this._t<t;)this._step(),this._history.push(this._stepper.history.clone());return o.interpolator(this._history.slice(0),this._stepper,this._output)},t.prototype.statistics=function(){return{lastError:this._lastError,nEval:this._stepper.nEval,nSteps:this._nSteps,nStepsAccepted:this._nStepsAccepted,nStepsRejected:this._nStepsRejected,stiffNNonstiff:this._stiffNNonstiff,stiffNStiff:this._stiffNStiff}},t.prototype._reset=function(){this._nSteps=0,this._nStepsAccepted=0,this._nStepsRejected=0,this._stiffNStiff=0,this._stiffNNonstiff=0,this._lastError=0},t.prototype._step=function(){for(var t=this._t,r=this._h,e=!1,i=!1,n=Math.max(this._lastError,1e-4),o=this._stepper.stepControl,f=this._control;!e;){if(this._nSteps>f.maxSteps)throw h("too many steps",t);if(r<f.stepSizeMin){if(!f.stepSizeMinAllow)throw h("step too small",t);r=f.stepSizeMin}if(r<=Math.abs(t)*a)throw h("step size vanished",t);t+r>f.tcrit&&(r=f.tcrit-t),this._stepper.step(t,r),this._nSteps++;var u=this._stepper.error(f.atol,f.rtol),l=Math.pow(u,o.constant),c=1/o.factorMin,p=1/o.factorMax;if(u<=1){if(e=!0,this._nStepsAccepted++,this._isStiff(r))throw h("problem became stiff",t);this._stepper.stepComplete(t,r);var d=l/Math.pow(n,o.beta),y=r/(d=s.constrain(d/o.factorSafe,p,c));this._t+=r,this._h=i?Math.min(y,r):Math.min(y,f.stepSizeMax),this._lastError=u}else i=!0,this._nStepsAccepted>=1&&this._nStepsRejected++,r/=Math.min(c,l/o.factorSafe)}return this._t},t.prototype._isStiff=function(t){if(this._stiffNStiff>0||this._nStepsAccepted%this._control.stiffCheck==0)if(this._stepper.isStiff(t)){if(this._stiffNNonstiff=0,this._stiffNStiff++>=15)return!0}else this._stiffNStiff>0&&this._stiffNNonstiff++>=6&&(this._stiffNStiff=0,this._stiffNNonstiff=0);return!1},t}();r.Dopri=f},134:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.Dopri5StepControl=function(){this.factorSafe=.9,this.factorMin=.2,this.factorMax=10,this.beta=.04,this.constant=.2-.75*this.beta}},922:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0});var i=e(660),n=e(134),o=e(430),s=function(){function t(t,r){this.order=5,this.stepControl=new n.Dopri5StepControl,this.nEval=0,this.rhs=t,this.n=r,this.y=new Array(r),this.yNext=new Array(r),this.yStiff=new Array(r),this.k1=new Array(r),this.k2=new Array(r),this.k3=new Array(r),this.k4=new Array(r),this.k5=new Array(r),this.k6=new Array(r),this.history=new o.HistoryElement(this.order*r)}return t.prototype.step=function(t,r){var e=this.n,i=this.y,n=this.yNext,o=this.k1,s=this.k2,a=this.k3,h=this.k4,f=this.k5,u=this.k6,l=this.history.data,c=0;for(c=0;c<e;++c)n[c]=i[c]+.2*r*o[c];for(this.rhs(t+.2*r,n,s),c=0;c<e;++c)n[c]=i[c]+r*(.075*o[c]+.225*s[c]);for(this.rhs(t+.3*r,n,a),c=0;c<e;++c)n[c]=i[c]+r*(.9777777777777777*o[c]+-3.7333333333333334*s[c]+3.5555555555555554*a[c]);for(this.rhs(t+.8*r,n,h),c=0;c<e;++c)n[c]=i[c]+r*(2.9525986892242035*o[c]+-11.595793324188385*s[c]+9.822892851699436*a[c]+-.2908093278463649*h[c]);for(this.rhs(t+.8888888888888888*r,n,f),c=0;c<e;++c)this.yStiff[c]=i[c]+r*(2.8462752525252526*o[c]+-10.757575757575758*s[c]+8.906422717743473*a[c]+.2784090909090909*h[c]+-.2735313036020583*f[c]);var p=t+r;for(this.rhs(p,this.yStiff,u),c=0;c<e;++c)n[c]=i[c]+r*(.09114583333333333*o[c]+.44923629829290207*a[c]+.6510416666666666*h[c]+-.322376179245283*f[c]+.13095238095238096*u[c]);this.rhs(p,n,s);var d=4*e;for(c=0;c<e;++c)l[d++]=r*(-1.1270175653862835*o[c]+2.675424484351598*a[c]+-5.685526961588504*h[c]+3.5219323679207912*f[c]+-1.7672812570757455*u[c]+2.382468931778144*s[c]);for(c=0;c<e;++c)h[c]=r*(.0012326388888888888*o[c]+-.0042527702905061394*a[c]+.03697916666666667*h[c]+-.05086379716981132*f[c]+.0419047619047619*u[c]+-.025*s[c]);this.nEval+=6},t.prototype.stepComplete=function(t,r){this.saveHistory(t,r),i.copyArray(this.k1,this.k2),i.copyArray(this.y,this.yNext)},t.prototype.error=function(t,r){var e=0,n=0;for(n=0;n<this.n;++n){var o=t+r*Math.max(Math.abs(this.y[n]),Math.abs(this.yNext[n]));e+=i.square(this.k4[n]/o)}return Math.sqrt(e/this.n)},t.prototype.interpolate=function(t,r){for(var e=r.data,i=(t-r.t)/r.h,n=1-i,o=this.n,s=new Array(o),a=0;a<o;++a)s[a]=e[a]+i*(e[o+a]+n*(e[2*o+a]+i*(e[3*o+a]+n*e[4*o+a])));return s},t.prototype.isStiff=function(t){for(var r=0,e=0,n=0;n<this.n;++n)r+=i.square(this.k2[n]-this.k6[n]),e+=i.square(this.yNext[n]-this.yStiff[n]);return e>0&&Math.abs(t)*Math.sqrt(r/e)>3.25},t.prototype.reset=function(t,r){for(var e=0;e<this.n;++e)this.y[e]=r[e];this.rhs(t,r,this.k1),this.nEval=1},t.prototype.saveHistory=function(t,r){for(var e=this.history,i=this.n,n=0;n<i;++n){var o=this.yNext[n]-this.y[n],s=r*this.k1[n]-o;e.data[n]=this.y[n],e.data[i+n]=o,e.data[2*i+n]=s,e.data[3*i+n]=-r*this.k2[n]+o-s}e.t=t,e.h=r},t}();r.Dopri5=s},606:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});var e=function(){function t(t){this.t=0,this.h=0,this.data=new Array(t)}return t.prototype.clone=function(){var r=new t(this.data.length);return r.t=this.t,r.h=this.h,r.data=this.data.slice(0),r},t}();r.HistoryElement=e},245:(t,r,e)=>{var i=e(223);r.sN=i.Dopri,i.integrate;var n=e(742);r.BJ=n.DDE,n.integrate,e(961).integrate},961:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0});var i=e(742),n=e(223);r.integrate=function(t,r,e,o,s,a){if(void 0===s&&(s={}),void 0===a&&(a=null),function(t){return 3===t.length}(t)){if(!function(t){return null===t||2===t.length}(a))throw new Error("Can't used delayed output with non-delayed rhs");return n.integrate(t,r,e,o,s,a)}if(function(t){return 4===t.length}(t)){if(!function(t){return null===t||3===t.length}(a))throw new Error("Can't used non-delayed output with delayed rhs");return i.integrate(t,r,e,o,s,a)}}},216:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.interpolator=function(t,r,e){return function(i){return function(t,r,e,i){for(var n=[],o=r,s=0,a=0,h=t;a<h.length;a++){for(var f=h[a];o[s].t+o[s].h<f;)s++;var u=e.interpolate(f,o[s]);null!==i&&(u=u.concat(i(f,u))),n.push(u)}return n}(i,t,r,e)}}},430:(t,r,e)=>{Object.defineProperty(r,"__esModule",{value:!0});var i=e(606);r.HistoryElement=i.HistoryElement},660:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});var e=Math.pow(2,-26);r.square=function(t){return t*t},r.constrain=function(t,r,e){return Math.max(Math.min(t,e),r)},r.copyArray=function(t,r){for(var e=t.length,i=0;i<e;i++)t[i]=r[i]},r.zeros=function(t){for(var r=Array(t),e=0;e<t;++e)r[e]=0;return r},r.approxEqual=function(t,r,i){void 0===i&&(i=e);var n=Math.abs(t-r),o=Math.abs(t);return o>i&&(n/=o),n<i},r.approxEqualArray=function(t,r,i){if(void 0===i&&(i=e),r.length!==t.length)throw Error("Incompatible arrays");for(var n=0,o=0,s=0,a=0;a<t.length;++a)t[a]!==r[a]&&(n+=Math.abs(t[a]),o+=Math.abs(t[a]-r[a]),s++);return 0===s||(o/=s,(n/=s)>i&&(o/=n),o<i)},r.seqLen=function(t,r,e){for(var i=[],n=0;n<e;++n){var o=n/(e-1);i.push((1-o)*t+o*r)}return i},r.search=function(t,r){var e=0,i=t.length-1;if(0===t.length||r(t[e]))return-1;if(!r(t[i]))return i;for(;i-e>1;){var n=Math.floor((e+i)/2);r(t[n])?i=n:e=n}return e}}},r={};function e(i){var n=r[i];if(void 0!==n)return n.exports;var o=r[i]={exports:{}};return t[i].call(o.exports,o,o.exports,e),o.exports}e.d=(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{e.r(i),e.d(i,{PkgWrapper:()=>b,wodinRun:()=>E});var t={};e.r(t),e.d(t,{intdivr:()=>f,modr:()=>h,odinSum1:()=>u,odinSum2:()=>l,odinSum3:()=>c,round2:()=>a});var r={};e.r(r),e.d(r,{checkUser:()=>p,setUserArrayFixed:()=>y,setUserArrayVariable:()=>v,setUserScalar:()=>d});var n={};function o(t,r,e,i){const n=t(r);for(let t=0;t<e.length;++t)i[t]=n[e[t]]}function s(t){return.5===h(t,1)?2*Math.round(t/2):Math.round(t)}function a(t,r){if(void 0===r||0===r)return s(t);{const e=Math.pow(10,r);return s(t*e)/e}}function h(t,r){let e=t%r;return e*r<0&&(e+=r),e}function f(t,r){return Math.floor(t/r)}function u(t,r,e){let i=0;for(let n=r;n<e;++n)i+=t[n];return i}function l(t,r,e,i,n,o){let s=0;for(let a=i;a<n;++a){const i=a*o;for(let n=r;n<e;++n)s+=t[n+i]}return s}function c(t,r,e,i,n,o,s,a,h){let f=0;for(let u=o;u<s;++u){const o=u*h;for(let s=i;s<n;++s){const i=s*a+o;for(let n=r;n<e;++n)f+=t[n+i]}}return f}function p(t,r,e){if("ignore"===e)return;const i=[];for(const e of t.keys())r.includes(e)||i.push(e);if(i.length>0){const t="Unknown user parameters: "+i.join(", ");if("message"===e)console.log(t);else{if("warning"!==e)throw"stop"===e?Error(t):Error(t+" (and invalid value for unusedUserAction)");console.warn(t)}}}function d(t,r,e,i,n,o,s){const a=t.get(r);if(void 0===a){if(void 0!==e[r])return;if(null===i)throw Error(`Expected a value for '${r}'`);e[r]=i}else{if("number"!=typeof a)throw Error(`Expected a number for '${r}'`);M(a,n,o,s,r),e[r]=a}}function y(t,r,e,i,n,o,s){let a=t.get(r);if(void 0===a){if(void 0!==e[r])return;throw Error(`Expected a value for '${r}'`)}{const t=i.length-1;a=_(a),m(t,a,r),function(t,r,e){const i=t.length-1;for(let n=0;n<i;++n){const o=t[n+1];if(r.dim[n]!==o)throw 1===i?Error(`Expected length ${o} value for '${e}'`):Error(`Incorrect size of dimension ${n+1} of '${e}' (expected ${o})`)}}(i,a,r),w(a,n,o,s,r),e[r]=a.data.slice()}}function v(t,r,e,i,n,o,s){let a=t.get(r);if(void 0===a){if(void 0!==e[r])return;throw Error("Expected a value for '"+r+"'")}{const t=i.length-1;a=_(a),m(t,a,r),w(a,n,o,s,r),i[0]=a.data.length;for(let r=0;r<t;++r)i[r+1]=a.dim[r];e[r]=a.data.slice()}}function _(t,r){return Array.isArray(t)?t={data:t,dim:[t.length]}:"number"==typeof t&&(t={data:[t],dim:[1]}),t}function m(t,r,e){if(r.dim.length!==t)throw 1===t?Error(`Expected a numeric vector for '${e}'`):2===t?Error(`Expected a numeric matrix for '${e}'`):Error(`Expected a numeric array of rank ${t} for '${e}'`)}function w(t,r,e,i,n){for(const o of t.data){if(null===o)throw Error(`'${n}' must not contain any NA values`);M(o,r,e,i,n)}}function M(t,r,e,i,n){if("number"!=typeof t)throw Error(`Expected a number for '${n}'`);if(t<r)throw Error(`Expected '${n}' to be at least ${r}`);if(t>e)throw Error(`Expected '${n}' to be at most ${e}`);if(i&&!Number.isInteger(t))throw Error(`Expected '${n}' to be integer-like`)}e.r(n),e.d(n,{delay:()=>o,maths:()=>t,user:()=>r});var S=e(245);function g(t,r,e,i,n){return function(t){return 4===t.rhs.length}(t)?function(t,r,e,i,n){let o=null;"function"==typeof t.output&&(o=(r,e,i)=>t.output(r,e,i)),null===r&&(r=t.initial(e)),t.getInternal().initial_t=e;const s=new S.BJ((function(r,e,i,n){t.rhs(r,e,i,n)}),r.length,n,o);return s.initialise(e,r),{solution:s.run(i),statistics:s.statistics()}}(t,r,e,i,n):function(t,r,e,i,n){let o=null;"function"==typeof t.output&&(o=(r,e)=>t.output(r,e)),null===r&&(r=t.initial(e));const s=new S.sN((function(r,e,i){t.rhs(r,e,i)}),r.length,n,o);return s.initialise(e,r),{solution:s.run(i),statistics:s.statistics()}}(t,r,e,i,n)}function E(t,r,e,i,o){const s=new t(n,r,"error"),a=g(s,null,e,i,o).solution,h=s.names();return(t,r,e)=>{const n=function(t,r,e){const i=(r-t)/(e-1),n=[];for(let r=0;r<e-1;++r)n.push(t+r*i);return n.push(r),n}(Math.max(0,t),Math.min(r,i),e),o=a(n);return o[0].map(((t,r)=>({name:h[r],x:n,y:o.map((t=>t[r]))})))}}class b{constructor(t,r,e){this.model=new t(n,r,e)}initial(t){return this.model.initial(t)}rhs(t,r){const e=new Array(r.length).fill(0);let i=null;if(3!==this.model.rhs.length)throw Error("Can't use rhs() with delay models");return this.model,this.model.rhs(t,r,e),this.model.output&&(i=this.model.output(t,r)),{output:i,state:e}}getMetadata(){return this.model.getMetadata()}getInternal(){return this.model.getInternal()}setUser(t,r){this.model.setUser(t,r)}run(t,r,e){const i=t[0],n=t[t.length-1],o=g(this.model,r,i,n,e);return{names:this.model.names(),statistics:o.statistics,y:o.solution(t)}}}})(),odin=i})();